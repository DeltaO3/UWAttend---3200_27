{% extends "base.html" %}
{% from 'macros.html' import input %}
{% block content %}

<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %} {%if category == 'error'%}
<div class="alert alert-danger alert-dismissable fade show d-flex justify-content-between" role="alert">
	{{ message }}
	<button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% else %}
<div class="alert alert-success alert-dismissable fade show d-flex justify-content-between" role="alert">
	{{ message }}
	<button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %} {% endfor %} {% endif %}
{% endwith %}

<div class="container-fluid">
	<div class="mx-4 mx-md-5 d-flex justify-content-center">
		<div>
			<h3 class="text-center">Add Student</h3>
			<form method="POST" novalidate>
				{{ form.hidden_tag() }}

				<div class="row row-cols-3">
					{{ input(form.studentNumber) }}
					{{ input(form.firstName) }}
					{{ input(form.lastName) }}
					{{ input(form.preferredName) }}
					{{ input(form.title) }}
					{{ form.submit(class="btn btn-primary" ) }}

				</div>
			</form>
			<h3 class="text-center">Student List for unit: {{ unit.unitCode }}</h2>
		</div>
	</div>

	<!-- Table -->
	<div class="d-flex justify-content-center">
		<div class="col-md-8 col-10 container" id="peopleTable">
			{% for student in students %}
			<!-- onlick re-route to student page for this specific student -->
			<div class="row outline-table text-center py-1 d-flex align-items-center">
				<span class="col">{{student.number }}</span>
				<span class="col">{{student.name }}</span>
				<span class="col">
					<form action="{{ url_for('deleteStudent') + '?unit_id='+unit_id+'&student_id='+student.id }}"
						method="POST">
						<button class="py-1 btn btn-danger" type="submit">Delete</button>
					</form>
				</span>
			</div>
			{% endfor %}
		</div>

		{% endblock %}